# ============================================================================
# LMELP Stack - Environment Configuration Template
# ============================================================================
# Copy this file to .env and fill in your actual values:
#   cp .env.example .env
#
# ⚠️  DO NOT commit .env to version control (it contains sensitive API keys)
# ============================================================================

# ============================================================================
# MongoDB Configuration
# ============================================================================
# Ces variables définissent la connexion MongoDB pour TOUS les services
#
# ⚠️  IMPORTANT : Utilisez le même host/port/database pour tous les services
# Différents services utilisent des noms de variables différents pour des
# raisons historiques, mais ils doivent pointer vers la même base MongoDB.

# --- Configuration de base MongoDB ---
# Host MongoDB (ajuster selon votre environnement)
MONGO_HOST=localhost
# Port MongoDB (27018 pour éviter conflit avec instance existante)
MONGO_PORT=27018
# Nom de la base de données
MONGO_DATABASE=masque_et_la_plume

# --- Variables dérivées (garder la même valeur !) ---
# Pour LMELP App (attend DB_HOST et DB_NAME)
DB_HOST=localhost
DB_NAME=masque_et_la_plume
DB_LOGS=true

# Pour Back-Office Backend (attend MONGODB_URL)
# ⚠️  Vérifier que host:port correspond à MONGO_HOST:MONGO_PORT ci-dessus
MONGODB_URL=mongodb://localhost:27018/masque_et_la_plume

# ============================================================================
# LLM API Keys - AU MOINS UNE CLÉ REQUISE
# ============================================================================
# L'application LMELP nécessite au moins une clé API LLM pour fonctionner.
# Vous pouvez en configurer plusieurs pour avoir des options de secours.

# --- Google Gemini (recommandé) ---
# Obtenir une clé : https://console.cloud.google.com/apis/credentials
GEMINI_API_KEY=

# --- Google Vertex AI ---
# Obtenir un projet : https://console.cloud.google.com
GOOGLE_PROJECT_ID=
GOOGLE_AUTH_FILE=

# --- OpenAI ---
# Obtenir une clé : https://platform.openai.com/api-keys
OPENAI_API_KEY=

# --- Azure OpenAI ---
AZURE_API_KEY=
AZURE_ENDPOINT=
AZURE_API_VERSION=

# --- LiteLLM (modèles locaux) ---
LITELLM_API_KEY=

# ============================================================================
# Google Custom Search (optionnel)
# ============================================================================
# Pour activer la recherche web dans LMELP
# Guide : https://github.com/castorfou/lmelp/blob/main/docs/readme_google.md
GOOGLE_CUSTOM_SEARCH_API_KEY=
SEARCH_ENGINE_ID=

# ============================================================================
# LMELP Application Configuration
# ============================================================================
# Configuration du flux RSS
RSS_LMELP_URL=https://radiofrance-podcast.net/podcast09/rss_14007.xml

# Mode de l'application
LMELP_MODE=web

# Port d'accès à l'application Streamlit
LMELP_PORT=8501

# ============================================================================
# Back-Office Configuration
# ============================================================================
# Port de l'API Backend
BACKEND_PORT=8000

# Port du Frontend Web
FRONTEND_PORT=8080

# ============================================================================
# Chemins des Volumes
# ============================================================================
# Ces chemins définissent où les données sont stockées sur l'hôte.
# Vous pouvez utiliser des chemins relatifs (./data/...) ou absolus (/mnt/...).

# Données MongoDB
MONGO_DATA_PATH=./data/mongodb

# Backups MongoDB
BACKUP_PATH=./data/backups

# Fichiers audio LMELP
AUDIO_PATH=./data/audios

# Logs applicatifs
LOG_PATH=./data/logs

# ============================================================================
# Backup Configuration
# ============================================================================
# Nombre de semaines de rétention des backups (défaut: 7)
BACKUP_RETENTION_WEEKS=7

# ============================================================================
# CONFIGURATION MINIMALE POUR DÉMARRER
# ============================================================================
# Pour un démarrage rapide, vous devez configurer AU MINIMUM :
#
# 1. Une clé LLM (au choix) :
#    GEMINI_API_KEY=votre_cle_ici
#    OU
#    OPENAI_API_KEY=votre_cle_ici
#
# 2. Créer les dossiers de données :
#    mkdir -p data/{mongodb,backups,audios,logs}
#
# 3. Démarrer la stack :
#    docker compose up -d
#
# Les autres variables ont des valeurs par défaut fonctionnelles.
# ============================================================================
