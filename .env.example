# ============================================================================
# LMELP Stack - Environment Configuration Template
# ============================================================================
# Copy this file to .env and fill in your actual values:
#   cp .env.example .env
#
# ⚠️  DO NOT commit .env to version control (it contains sensitive API keys)
# ============================================================================

# ============================================================================
# MongoDB Configuration
# ============================================================================
# Ces variables définissent la connexion MongoDB pour TOUS les services
#
# ⚠️  IMPORTANT : En mode bridge network, les services utilisent les noms
# de service Docker pour communiquer entre eux (ex: "mongo" au lieu de "localhost")
# Le port exposé sur l'hôte peut être différent du port interne.

# --- Configuration de base MongoDB ---
# Port exposé sur l'hôte (27018 pour éviter conflit avec instance existante)
# Accès depuis l'hôte : mongodb://localhost:27018
MONGO_PORT=27018

# Nom de la base de données
MONGO_DATABASE=masque_et_la_plume

# --- Variables pour logs ---
DB_LOGS=true

# ============================================================================
# LLM API Keys - AU MOINS UNE CLÉ REQUISE
# ============================================================================
# L'application LMELP nécessite au moins une clé API LLM pour fonctionner.
# Vous pouvez en configurer plusieurs pour avoir des options de secours.

# --- Google Gemini (recommandé) ---
# Obtenir une clé : https://console.cloud.google.com/apis/credentials
GEMINI_API_KEY=

# --- Google Vertex AI ---
# Obtenir un projet : https://console.cloud.google.com
GOOGLE_PROJECT_ID=
GOOGLE_AUTH_FILE=

# --- OpenAI ---
# Obtenir une clé : https://platform.openai.com/api-keys
OPENAI_API_KEY=

# --- Azure OpenAI ---
AZURE_API_KEY=
AZURE_ENDPOINT=
AZURE_API_VERSION=
AZURE_DEPLOYMENT_NAME=

# --- LiteLLM (modèles locaux) ---
LITELLM_API_KEY=

# ============================================================================
# Google Custom Search (optionnel)
# ============================================================================
# Pour activer la recherche web dans LMELP
# Guide : https://github.com/castorfou/lmelp/blob/main/docs/readme_google.md
GOOGLE_CUSTOM_SEARCH_API_KEY=
SEARCH_ENGINE_ID=

# ============================================================================
# LMELP Application Configuration
# ============================================================================
# Configuration du flux RSS
RSS_LMELP_URL=https://radiofrance-podcast.net/podcast09/rss_14007.xml

# Mode de l'application
LMELP_MODE=web

# Port d'accès à l'application Streamlit
LMELP_PORT=8501

# ============================================================================
# Back-Office Configuration
# ============================================================================
# Port de l'API Backend
BACKEND_PORT=8000

# Port du Frontend Web
FRONTEND_PORT=8080

# ============================================================================
# Chemins des Volumes
# ============================================================================
# Ces chemins définissent où les données sont stockées sur l'hôte.
# Vous pouvez utiliser des chemins relatifs (./data/...) ou absolus (/mnt/...).

# Données MongoDB
MONGO_DATA_PATH=./data/mongodb

# Backups MongoDB
BACKUP_PATH=./data/backups

# Fichiers audio LMELP
AUDIO_PATH=./data/audios

# Logs applicatifs LMELP
LOG_PATH=./data/logs

# Logs MongoDB (mongod.log, backup.log, rotation.log)
MONGO_LOG_PATH=./data/logs/mongodb

# ============================================================================
# Calibre Integration (Optionnel)
# ============================================================================
# Intégration d'une bibliothèque Calibre existante au back-office.
# Le volume est monté en lecture seule pour éviter toute modification.
# Aucune installation de Calibre n'est requise (lecture directe de metadata.db).
#
# ⚠️  IMPORTANT pour Portainer : Utiliser des chemins ABSOLUS
# Portainer résout les chemins relatifs depuis son propre répertoire de travail,
# pas depuis le répertoire du docker-compose.yml.
#
# Laisser vide ou commenter pour désactiver l'intégration Calibre.

# --- NAS Synology ---
# CALIBRE_HOST_PATH=/volume1/books/Calibre Library

# --- Linux ---
# CALIBRE_HOST_PATH=/home/user/Calibre Library

# --- Mac ---
# CALIBRE_HOST_PATH=/Users/username/Calibre Library

# --- Windows (WSL2 ou Docker Desktop) ---
# CALIBRE_HOST_PATH=/mnt/c/Users/username/Calibre Library

# Tag de bibliothèque virtuelle Calibre (optionnel)
# Permet de filtrer les livres selon un tag spécifique
# CALIBRE_VIRTUAL_LIBRARY_TAG=guillaume

# ============================================================================
# Backup Configuration
# ============================================================================
# Nombre de semaines de rétention des backups (défaut: 7)
BACKUP_RETENTION_WEEKS=7


# ============================================================================
# Calibre Integration (Optionnel)
# ============================================================================
# Intégration d'une bibliothèque Calibre existante au back-office.
# Le volume est monté en lecture seule pour éviter toute modification.
# Aucune installation de Calibre n'est requise (lecture directe de metadata.db).
#
# ⚠️  IMPORTANT pour Portainer : Utiliser des chemins ABSOLUS
# Portainer résout les chemins relatifs depuis son propre répertoire de travail,
# pas depuis le répertoire du docker-compose.yml.
#
# Laisser vide ou commenter pour désactiver l'intégration Calibre.

# --- NAS Synology ---
# CALIBRE_HOST_PATH=/volume1/books/Calibre Library

# --- Linux ---
CALIBRE_HOST_PATH=

# --- Mac ---
# CALIBRE_HOST_PATH=/Users/username/Calibre Library

# --- Windows (WSL2 ou Docker Desktop) ---
# CALIBRE_HOST_PATH=/mnt/c/Users/username/Calibre Library

# Tag de bibliothèque virtuelle Calibre (optionnel)
# Permet de filtrer les livres selon un tag spécifique
CALIBRE_VIRTUAL_LIBRARY_TAG=


# ============================================================================
# CONFIGURATION MINIMALE POUR DÉMARRER
# ============================================================================
# Pour un démarrage rapide, vous devez configurer AU MINIMUM :
#
# 1. Une clé LLM (au choix) :
#    GEMINI_API_KEY=votre_cle_ici
#    OU
#    OPENAI_API_KEY=votre_cle_ici
#
# 2. Nom de la base de données (optionnel, valeur par défaut: masque_et_la_plume):
#    MONGO_DATABASE=masque_et_la_plume
#
# 3. Démarrer la stack :
#    docker compose up -d
#
# Les autres variables ont des valeurs par défaut fonctionnelles.
# La structure des dossiers data/ est créée automatiquement au git clone.
# ============================================================================
